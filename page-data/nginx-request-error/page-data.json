{"componentChunkName":"component---src-pages-blog-post-js","path":"/nginx-request-error/","result":{"data":{"site":{"siteMetadata":{"title":"klloo"}},"markdownRemark":{"id":"2351dbbd-b74d-502e-99d1-1ad4c166d677","excerpt":"…","html":"<p>최근에 배포해뒀던 프로젝트에 파일 업로드가 가능한 게시판 기능을 추가하였습니다. 로컬에서 테스트를 마치고 배포 후 다시 테스트를 진행해봤는데요...파일 업로드를 하려니</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; overflow: hidden!important; border-radius: 8px!important; margin-left: 0!important;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6fd1cbadc9875506dc88688b1c9a0a4f/47ff6/error.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.82608695652174%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1ElEQVR42tVTSQqDQBDM/28iiMtF8A2C4jNERD0IIqK4HVRwr8QOnUhyE3JIQTHdM9VFwczcbNuGaZrEozYMA4IgQBRFKIoCTdOolmUZqqpC13VIkkSrZVmvWcdxSHvDA/u+Ew90XYeiKJBlGdI0RV3X1Od5jrZt0TQNkiRBWZbg2W3bqPZ9/2k4TRPmeSau60oCFvV9j6qqMAzDa59NeGYcR9K6rvtOyOC0zLPJJxlfCc+HV/CHhueLuMJlWcjQ87wfJIzjGGEYIoqiywyCgN7m8THuHAT23azAwmMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"error\"\n        title=\"\"\n        src=\"/static/6fd1cbadc9875506dc88688b1c9a0a4f/dd45a/error.png\"\n        srcset=\"/static/6fd1cbadc9875506dc88688b1c9a0a4f/948cf/error.png 138w,\n/static/6fd1cbadc9875506dc88688b1c9a0a4f/6b2ea/error.png 275w,\n/static/6fd1cbadc9875506dc88688b1c9a0a4f/dd45a/error.png 550w,\n/static/6fd1cbadc9875506dc88688b1c9a0a4f/d4c13/error.png 825w,\n/static/6fd1cbadc9875506dc88688b1c9a0a4f/47ff6/error.png 852w\"\n        sizes=\"(max-width: 550px) 100vw, 550px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이런 에러가 떴습니다.</p>\n<p>지금 제 프로젝트의 구조가</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; overflow: hidden!important; border-radius: 8px!important; margin-left: 0!important;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3efdfd7a8f6f0f8275dd63d5ab91acf5/5a6dd/structure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.79710144927537%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABeklEQVR42o1Sy27CMBDMl/dveuPWD+ipUoW4UKQeWlSkFlAeBNvBxolf07VRIkihwtLKyXp3dnZ3Mlw7wZOF4VeZgJ0MMA7wYRQaLh0Z/jl9qNABP8yjEhpSGzjnbuZko3LpkssZzO47AQbvE3RkIgSHlAe0bZviPNGtm/a8mRPgQJvu+FVPn2DXC/jkc6ilxXxroNUR1joCSi/YC4mHxyk0zSJ4l3D+tkwPG2GwKFyapXcWedPhdc1gvIKxhpiKwZhooFsNY+wJMFZbLpdQSkFrje6oaF5HzAuaVyOQ5wX5JT52L/jav0O1CozxBHZoGnClwVkB0+nUXWatxWQyQVmW4Jyj4Q3WbE2AczgTGRpUxPAtp5aIraeFxJyYHRnFBUXrx5CNV++dB5MMpaxSgboqsdpxPK82sBRWWA/bdQlgLJkLwN5i9XFgcSgw206xl0d87gW11yLcJZskBWJArUXr2+lMR8sgH92WJGPv1uGZ+q/ZIPYQbgL+AjGYW6WgXw4JAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"structure\"\n        title=\"\"\n        src=\"/static/3efdfd7a8f6f0f8275dd63d5ab91acf5/dd45a/structure.png\"\n        srcset=\"/static/3efdfd7a8f6f0f8275dd63d5ab91acf5/948cf/structure.png 138w,\n/static/3efdfd7a8f6f0f8275dd63d5ab91acf5/6b2ea/structure.png 275w,\n/static/3efdfd7a8f6f0f8275dd63d5ab91acf5/dd45a/structure.png 550w,\n/static/3efdfd7a8f6f0f8275dd63d5ab91acf5/5a6dd/structure.png 802w\"\n        sizes=\"(max-width: 550px) 100vw, 550px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이렇게 되어있는데 에러메시지를 보니... reverse proxy로 사용한 nginx에서 큰 사이즈의 요청을 제한하고 있었던 것 같았습니다.</p>\n<p>찾아보니 nginx의 <code class=\"language-text\">client_max_body_size</code> 설정 때문이었습니다. nginx에서는 해당 설정으로 요청의 사이즈를 제한할 수 있고 기본값은 1MB이며, 제한을 두지 않으려면 0으로 설정하면 된다고 합니다.</p>\n<p>이 설정은 nginx 설정 파일(default.conf)의 http, server, location 블록에 설정이 가능합니다. 저는 server에 설정을 해뒀습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">server <span class=\"token punctuation\">{</span>\n    client_max_body_size 50M<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 nginx 설정 파일을 수정하고 재시작을 해주니 파일 업로드 요청이 잘 전송되는 것을 확인할 수 있었습니다!</p>\n<br/>\n<br/>\n<p><strong>Reference</strong>\n<br/>\n<a href=\"https://determination.tistory.com/entry/Nginx-clientmaxbodysize-%EC%88%98%EC%A0%95%ED%95%98%EA%B8%B0\">https://determination.tistory.com/entry/Nginx-clientmaxbodysize-수정하기</a>\n<br/>\n<a href=\"https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size\">https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size</a></p>","tableOfContents":"","frontmatter":{"title":"Nginx 413 Request Entity Too Large 에러 해결","date":"January 17, 2024","description":"413 에러를 해결했습니다.","category":"프론트엔드","icon":"🏎️","tags":["Project","Nginx"]}},"previous":{"fields":{"slug":"/react-xss/"},"frontmatter":{"title":"React가 XSS 공격을 방지하는 방법"}},"next":{"fields":{"slug":"/docker-log/"},"frontmatter":{"title":"EC2에서 Docker Container 로그 정리하기"}}},"pageContext":{"id":"2351dbbd-b74d-502e-99d1-1ad4c166d677","previousPostId":"8e813377-82e2-5123-8078-15f5267e380c","nextPostId":"7e160f21-8d7a-5522-9b38-448093b8a335"}},"staticQueryHashes":[],"slicesMap":{}}